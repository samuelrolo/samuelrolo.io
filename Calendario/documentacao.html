<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Documentação - Calendário Interativo Share2Inspire</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }
        h1 {
            color: #3498db;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }
        h2 {
            color: #2c3e50;
            margin-top: 30px;
        }
        h3 {
            color: #34495e;
            margin-top: 25px;
        }
        code {
            background-color: #f8f9fa;
            padding: 2px 5px;
            border-radius: 3px;
            font-family: Consolas, Monaco, 'Andale Mono', monospace;
        }
        pre {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            border: 1px solid #ddd;
        }
        .note {
            background-color: #e8f4f8;
            padding: 15px;
            border-left: 4px solid #3498db;
            margin: 20px 0;
        }
        .warning {
            background-color: #fdf2e9;
            padding: 15px;
            border-left: 4px solid #e67e22;
            margin: 20px 0;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        th {
            background-color: #f2f2f2;
        }
        img {
            max-width: 100%;
            height: auto;
            display: block;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <h1>Documentação do Calendário Interativo - Share2Inspire</h1>
    
    <h2>Índice</h2>
    <ol>
        <li><a href="#introducao">Introdução</a></li>
        <li><a href="#requisitos">Requisitos do Sistema</a></li>
        <li><a href="#instalacao">Instalação</a></li>
        <li><a href="#estrutura">Estrutura do Projeto</a></li>
        <li><a href="#funcionalidades">Funcionalidades</a></li>
        <li><a href="#integracao-google">Integração com Google Calendar</a></li>
        <li><a href="#integracao-pagamento">Integração com Sistemas de Pagamento</a></li>
        <li><a href="#personalizacao">Personalização</a></li>
        <li><a href="#manutencao">Manutenção e Suporte</a></li>
    </ol>
    
    <h2 id="introducao">1. Introdução</h2>
    <p>O Calendário Interativo para Share2Inspire é uma solução completa para marcação de sessões de Kickstart Pro | Express Coaching. Este sistema permite aos clientes visualizar a disponibilidade, selecionar horários, escolher a duração das sessões, e realizar o pagamento, tudo em uma interface intuitiva e responsiva.</p>
    
    <div class="note">
        <strong>Nota:</strong> Este sistema foi desenvolvido especificamente para o site Share2Inspire.pt, seguindo os requisitos e regras de negócio fornecidos.
    </div>
    
    <h2 id="requisitos">2. Requisitos do Sistema</h2>
    <h3>2.1 Requisitos Técnicos</h3>
    <ul>
        <li>Servidor web com suporte a HTML, CSS e JavaScript</li>
        <li>Navegador moderno com suporte a JavaScript (Chrome, Firefox, Safari, Edge)</li>
        <li>Conexão com internet para integração com APIs externas</li>
        <li>Conta Google para integração com Google Calendar (share2inspire@gmail.com)</li>
        <li>Contas de desenvolvedor para gateways de pagamento (Revolut, PayPal)</li>
    </ul>
    
    <h3>2.2 Dependências</h3>
    <ul>
        <li>FullCalendar 5.10.0 - Biblioteca para visualização do calendário</li>
        <li>Font Awesome 6.0.0 - Biblioteca de ícones</li>
        <li>Google API Client - Para integração com Google Calendar</li>
    </ul>
    
    <h2 id="instalacao">3. Instalação</h2>
    <h3>3.1 Instalação Básica</h3>
    <p>Para instalar o sistema em seu servidor web, siga os passos abaixo:</p>
    
    <ol>
        <li>Faça o upload de todos os arquivos para o diretório desejado em seu servidor web</li>
        <li>Certifique-se de manter a estrutura de diretórios intacta:
            <pre>
/
├── index.html
├── css/
│   └── styles.css
└── js/
    ├── calendar.js
    ├── booking.js
    ├── booking-manager.js
    ├── booking-integration.js
    ├── price-system.js
    ├── payment-system.js
    ├── google-calendar-integration.js
    ├── integration.js
    └── test-system.js</pre>
        </li>
        <li>Configure as chaves de API para os serviços externos (ver seções de integração)</li>
    </ol>
    
    <h3>3.2 Configuração de APIs</h3>
    <p>Para configurar as APIs externas, você precisará editar os seguintes arquivos:</p>
    
    <h4>Google Calendar API (js/google-calendar-integration.js)</h4>
    <pre>
apiConfig: {
    clientId: 'your-client-id.apps.googleusercontent.com', // Substituir pelo Client ID real
    apiKey: 'your-api-key', // Substituir pela API Key real
    calendarId: 'share2inspire@gmail.com',
    scopes: 'https://www.googleapis.com/auth/calendar'
}</pre>
    
    <h4>Sistemas de Pagamento (js/payment-system.js)</h4>
    <pre>
apiKeys: {
    revolut: 'sandbox_revolut_api_key',
    paypal: 'sandbox_paypal_api_key',
    stripe: 'sandbox_stripe_api_key'
},

apiUrls: {
    revolut: 'https://sandbox.revolut.com/api/1.0/payments',
    paypal: 'https://api.sandbox.paypal.com/v2/checkout/orders',
    stripe: 'https://api.stripe.com/v1/payment_intents'
}</pre>
    
    <div class="warning">
        <strong>Atenção:</strong> Nunca compartilhe suas chaves de API em repositórios públicos ou com pessoas não autorizadas.
    </div>
    
    <h2 id="estrutura">4. Estrutura do Projeto</h2>
    <h3>4.1 Arquivos Principais</h3>
    <table>
        <tr>
            <th>Arquivo</th>
            <th>Descrição</th>
        </tr>
        <tr>
            <td>index.html</td>
            <td>Página principal com a interface do calendário</td>
        </tr>
        <tr>
            <td>css/styles.css</td>
            <td>Estilos CSS para a interface</td>
        </tr>
        <tr>
            <td>js/calendar.js</td>
            <td>Configuração e funcionalidades do calendário</td>
        </tr>
        <tr>
            <td>js/booking-manager.js</td>
            <td>Gerenciamento de reservas e disponibilidade</td>
        </tr>
        <tr>
            <td>js/price-system.js</td>
            <td>Sistema de preços e descontos</td>
        </tr>
        <tr>
            <td>js/payment-system.js</td>
            <td>Integração com sistemas de pagamento</td>
        </tr>
        <tr>
            <td>js/google-calendar-integration.js</td>
            <td>Integração com Google Calendar</td>
        </tr>
        <tr>
            <td>js/integration.js</td>
            <td>Integração entre todos os componentes</td>
        </tr>
        <tr>
            <td>js/test-system.js</td>
            <td>Sistema de testes para validação</td>
        </tr>
    </table>
    
    <h3>4.2 Arquitetura do Sistema</h3>
    <p>O sistema segue uma arquitetura modular, com componentes independentes que se comunicam entre si:</p>
    
    <ul>
        <li><strong>Interface do Usuário</strong>: HTML e CSS para apresentação</li>
        <li><strong>Calendário</strong>: Visualização e interação com datas e horários</li>
        <li><strong>Gerenciador de Reservas</strong>: Lógica de disponibilidade e armazenamento</li>
        <li><strong>Sistema de Preços</strong>: Cálculo de preços e descontos</li>
        <li><strong>Sistema de Pagamento</strong>: Processamento de pagamentos</li>
        <li><strong>Integração com Google Calendar</strong>: Sincronização de eventos</li>
        <li><strong>Integração</strong>: Conexão entre todos os componentes</li>
    </ul>
    
    <h2 id="funcionalidades">5. Funcionalidades</h2>
    <h3>5.1 Disponibilidade de Horários</h3>
    <p>O sistema gerencia automaticamente a disponibilidade de horários conforme as regras definidas:</p>
    
    <ul>
        <li><strong>Sábados</strong>: 09:30 às 16:00 (com pausa para almoço das 12:00 às 13:00)</li>
        <li><strong>Dias de semana</strong>: 18:30 às 21:30</li>
        <li><strong>Duração das sessões</strong>: Flexível, de 15 minutos a 60 minutos (em incrementos de 15 minutos)</li>
    </ul>
    
    <h3>5.2 Sistema de Preços</h3>
    <p>O sistema calcula automaticamente os preços com base nas seguintes regras:</p>
    
    <ul>
        <li><strong>Base</strong>: 10€ por cada slot de 15 minutos</li>
        <li><strong>Preços por duração</strong>:
            <ul>
                <li>15 minutos: 10€</li>
                <li>30 minutos: 20€ (-2,5€ em 2 ou mais marcações)</li>
                <li>45 minutos: 30€ (-5€ em 2 ou mais sessões)</li>
                <li>60 minutos: 40€ (-7,5€ em mais do que duas marcações)</li>
            </ul>
        </li>
        <li><strong>Promoções</strong>:
            <ul>
                <li>Primeiras 10 vagas: 25% de desconto na primeira marcação</li>
                <li>A cada 5 sessões: Uma sessão adicional gratuita</li>
            </ul>
        </li>
    </ul>
    
    <h3>5.3 Regras de Marcação</h3>
    <p>O sistema implementa as seguintes regras para marcações:</p>
    
    <ul>
        <li><strong>Antecedência mínima</strong>: 48 horas para todas as sessões</li>
        <li><strong>Sessões remotas</strong>: Por defeito, todas as sessões são remotas</li>
        <li><strong>Sessões presenciais</strong>:
            <ul>
                <li>Disponíveis dentro do distrito de Lisboa (sem custos de deslocação)</li>
                <li>Antecedência mínima: 5 dias úteis para confirmação e validação</li>
                <li>Duração mínima: 60 minutos</li>
                <li>Bloqueiam o resto do dia no calendário</li>
                <li>Não se aplicam descontos de quantidade</li>
            </ul>
        </li>
    </ul>
    
    <h3>5.4 Política de Pagamento</h3>
    <ul>
        <li>Pagamento no ato da marcação</li>
        <li>Sem reembolso para desistências</li>
        <li>Em marcações com mais de uma sessão, apenas os valores além da primeira sessão podem ser reembolsados (a primeira sessão nunca é reembolsável)</li>
    </ul>
    
    <h2 id="integracao-google">6. Integração com Google Calendar</h2>
    <h3>6.1 Configuração</h3>
    <p>Para configurar a integração com o Google Calendar, siga os passos abaixo:</p>
    
    <ol>
        <li>Acesse o <a href="https://console.developers.google.com/" target="_blank">Google Developer Console</a></li>
        <li>Crie um novo projeto</li>
        <li>Ative a API do Google Calendar</li>
        <li>Crie credenciais OAuth 2.0 para aplicação web</li>
        <li>Configure as origens JavaScript autorizadas e URIs de redirecionamento</li>
        <li>Copie o Client ID e a API Key para o arquivo js/google-calendar-integration.js</li>
    </ol>
    
    <h3>6.2 Funcionalidades</h3>
    <p>A integração com o Google Calendar oferece as seguintes funcionalidades:</p>
    
    <ul>
        <li>Autenticação OAuth para acesso seguro ao calendário</li>
        <li>Adição automática de eventos ao calendário quando uma reserva é confirmada</li>
        <li>Sincronização bidirecional de eventos (do sistema para o Google Calendar e vice-versa)</li>
        <li>Atualização de eventos quando reservas são modificadas</li>
        <li>Cancelamento de eventos quando reservas são canceladas</li>
    </ul>
    
    <h2 id="integracao-pagamento">7. Integração com Sistemas de Pagamento</h2>
    <h3>7.1 Métodos de Pagamento Suportados</h3>
    <ul>
        <li>Revolut</li>
        <li>PayPal</li>
        <li>Cartões de crédito (via Stripe)</li>
    </ul>
    
    <h3>7.2 Configuração do Revolut</h3>
    <ol>
        <li>Crie uma conta Revolut Business</li>
        <li>Acesse o painel de desenvolvedor</li>
        <li>Crie uma nova API key</li>
        <li>Configure os webhooks para notificações de pagamento</li>
        <li>Atualize o arquivo js/payment-system.js com suas credenciais</li>
    </ol>
    
    <h3>7.3 Configuração do PayPal</h3>
    <ol>
        <li>Crie uma conta PayPal Developer</li>
        <li>Acesse o PayPal Developer Dashboard</li>
        <li>Crie uma nova aplicação</li>
        <li>Obtenha as credenciais de sandbox e produção</li>
        <li>Configure os webhooks para notificações de pagamento</li>
        <li>Atualize o arquivo js/payment-system.js com suas credenciais</li>
    </ol>
    
    <h3>7.4 Configuração do Stripe (Cartões de Crédito)</h3>
    <ol>
        <li>Crie uma conta Stripe</li>
        <li>Acesse o painel de desenvolvedor</li>
        <li>Obtenha as chaves de API de teste e produção</li>
        <li>Configure os webhooks para notificações de pagamento</li>
        <li>Atualize o arquivo js/payment-system.js com suas credenciais</li>
    </ol>
    
    <h2 id="personalizacao">8. Personalização</h2>
    <h3>8.1 Personalização Visual</h3>
    <p>Para personalizar a aparência do calendário, você pode editar o arquivo css/styles.css. As principais variáveis de cores estão definidas no início do arquivo:</p>
    
    <pre>
:root {
    --primary-color: #3498db;
    --secondary-color: #2c3e50;
    --accent-color: #e74c3c;
    --light-color: #ecf0f1;
    --dark-color: #34495e;
    --success-color: #2ecc71;
    --warning-color: #f39c12;
    --text-color: #333;
    --border-radius: 4px;
    --box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
}</pre>
    
    <h3>8.2 Personalização de Regras de Negócio</h3>
    <p>Para modificar as regras de negócio, você precisará editar os seguintes arquivos:</p>
    
    <ul>
        <li><strong>Horários disponíveis</strong>: js/calendar.js (variável availableTimeSlots e businessHours)</li>
        <li><strong>Preços e descontos</strong>: js/price-system.js (objeto priceSystem)</li>
        <li><strong>Regras de marcação</strong>: js/booking-manager.js (métodos checkAvailability e isWithinBusinessHours)</li>
        <li><strong>Política de pagamento</strong>: js/payment-system.js (método handlePaymentResult)</li>
    </ul>
    
    <h2 id="manutencao">9. Manutenção e Suporte</h2>
    <h3>9.1 Testes do Sistema</h3>
    <p>O sistema inclui um módulo de testes automatizados que pode ser acessado clicando no botão "Testar Sistema" que aparece no canto inferior direito da página. Este módulo verifica:</p>
    
    <ul>
        <li>Interface do usuário</li>
        <li>Lógica de reserva</li>
        <li>Sistema de preços</li>
        <li>Sistema de pagamento</li>
        <li>Integração com Google Calendar</li>
        <li>Responsividade</li>
    </ul>
    
    <h3>9.2 Solução de Problemas Comuns</h3>
    <table>
        <tr>
            <th>Problema</th>
            <th>Possível Causa</th>
            <th>Solução</th>
        </tr>
        <tr>
            <td>Calendário não carrega</td>
            <td>Erro na biblioteca FullCalendar</td>
            <td>Verificar se a biblioteca está sendo carregada corretamente</td>
        </tr>
        <tr>
            <td>Erro na autenticação do Google</td>
            <td>Credenciais inválidas ou origens não autorizadas</td>
            <td>Verificar configurações no Google Developer Console</td>
        </tr>
        <tr>
            <td>Pagamentos não processados</td>
            <td>Erro nas credenciais de API ou configuração incorreta</td>
            <td>Verificar logs de erro e configurações de API</td>
        </tr>
        <tr>
            <td>Horários indisponíveis incorretamente</td>
            <td>Erro na lógica de verificação de disponibilidade</td>
            <td>Verificar método checkAvailability no BookingManager</td>
        </tr>
        <tr>
            <td>Preços calculados incorretamente</td>
            <td>Erro nas regras de preços ou descontos</td>
            <td>Verificar método calculatePrice no PriceSystem</td>
        </tr>
    </table>
    
    <h3>9.3 Contato para Suporte</h3>
    <p>Para suporte técnico ou dúvidas sobre o sistema, entre em contato através do email: support@share2inspire.pt</p>
    
    <div class="note">
        <strong>Nota Final:</strong> Este sistema foi desenvolvido para atender às necessidades específicas do Share2Inspire.pt. Qualquer modificação deve ser feita com cuidado para não comprometer a funcionalidade do sistema.
    </div>
</body>
</html>
